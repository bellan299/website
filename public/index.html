<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jp's Liquor - Premium Spirits & Wine</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="auth-styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-auth-compat.js"></script>
    
    <!-- Essential Auth Functions - Available Immediately -->
    <script>
        // Global functions for HTML onclick handlers - defined immediately to prevent "not defined" errors
        function showAuthModal(modalType) {
            console.log('showAuthModal called with:', modalType);
            console.log('window.authUI:', window.authUI);
            
            if (window.authUI && typeof window.authUI.showModal === 'function') {
                console.log('Calling authUI.showModal...');
                try {
                    window.authUI.showModal(modalType);
                } catch (error) {
                    console.error('Error calling authUI.showModal:', error);
                    // Fallback to direct modal manipulation
                    fallbackShowModal(modalType);
                }
            } else {
                console.warn('window.authUI is not available or showModal method missing! Falling back.');
                // Fallback to direct modal manipulation
                fallbackShowModal(modalType);
            }
        }
        
        function fallbackShowModal(modalType) {
            console.log('Using fallback modal display for:', modalType);
            const modal = document.getElementById(modalType + '-modal');
            if (modal) {
                // Hide any other active modals first
                document.querySelectorAll('.auth-modal.active').forEach(m => {
                    m.classList.remove('active');
                });
                modal.classList.add('active');
                console.log('Modal shown via fallback:', modalType, modal);
            } else {
                console.error('Modal not found for fallback:', modalType);
                // List all modal IDs present
                document.querySelectorAll('.auth-modal').forEach(m => {
                    console.log('Available modal ID:', m.id);
                });
            }
        }

        function closeAuthModal(modalType) {
            console.log('closeAuthModal called with:', modalType);
            
            if (window.authUI && typeof window.authUI.closeCurrentModal === 'function') {
                try {
                    window.authUI.closeCurrentModal();
                } catch (error) {
                    console.error('Error calling authUI.closeCurrentModal:', error);
                    // Fallback to direct modal manipulation
                    fallbackCloseModal(modalType);
                }
            } else {
                console.error('window.authUI is not available or closeCurrentModal method missing!');
                // Fallback to direct modal manipulation
                fallbackCloseModal(modalType);
            }
        }
        
        function fallbackCloseModal(modalType) {
            console.log('Using fallback modal close for:', modalType);
            const modal = document.getElementById(modalType + '-modal');
            if (modal) {
                modal.classList.remove('active');
                console.log('Modal closed via fallback:', modalType);
            } else {
                console.error('Modal not found for fallback close:', modalType);
                // Close all modals as a last resort
                document.querySelectorAll('.auth-modal.active').forEach(m => {
                    m.classList.remove('active');
                });
                console.log('Closed all active modals as fallback');
            }
        }

        function togglePassword(inputId) {
            const input = document.getElementById(inputId);
            const button = input.parentNode.querySelector('.password-toggle');
            const icon = button.querySelector('i');
            
            if (input.type === 'password') {
                input.type = 'text';
                icon.className = 'fas fa-eye-slash';
            } else {
                input.type = 'password';
                icon.className = 'fas fa-eye';
            }
        }

        function resendVerification() {
            // Simulate resending verification email
            if (window.authUI) {
                window.authUI.showSuccess('Verification email resent!');
            }
        }

        function showTerms() {
            alert('Terms of Service would be displayed here.');
        }

        function showPrivacy() {
            alert('Privacy Policy would be displayed here.');
        }

        function showDeleteAccountModal() {
            showAuthModal('delete-account');
        }

        function showUserMenu() {
            const dropdown = document.getElementById('user-dropdown');
            if (dropdown) {
                dropdown.classList.toggle('show');
            }
        }
    </script>
    <style>
      .auth-modal { display: none !important; }
      .auth-modal.active { display: flex !important; }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <nav class="navbar">
            <div class="nav-container">
                <div class="nav-auth">
                    <button class="auth-btn signin-btn" onclick="showAuthModal('login')">Sign In</button>
                    <button class="auth-btn signup-btn" onclick="showAuthModal('register')">Sign Up</button>
                </div>
                <div class="nav-logo">
                    <h1>Jp's Liquor</h1>
                </div>
                <div class="nav-menu">
                    <a href="#home" class="nav-link">Home</a>
                    <a href="#products" class="nav-link">Products</a>
                    <a href="#bestsellers" class="nav-link">Best Sellers</a>
                    <a href="#newarrivals" class="nav-link">New Arrivals</a>
                    <a href="#about" class="nav-link">About</a>
                    <a href="#contact" class="nav-link">Contact</a>
                </div>
                <div class="nav-toggle">
                    <span class="bar"></span>
                    <span class="bar"></span>
                    <span class="bar"></span>
                </div>
            </div>
        </nav>
    </header>

    <!-- Hero Section -->
    <section id="home" class="hero">
        <div class="hero-content">
            <h1>Welcome to Jp's Liquor</h1>
            <p>Your premier destination for fine spirits, craft beer, and exceptional wines</p>
            <a href="#products" class="cta-button">Shop Now</a>
        </div>
    </section>

    <!-- Categories Section -->
    <section class="categories">
        <div class="container">
            <h2>Shop by Category</h2>
            <div class="category-grid">
                <a href="wine.html" class="category-card">
                    <i class="fas fa-wine-bottle"></i>
                    <h3>Wine</h3>
                    <p>Red, White, Ros√© & Sparkling</p>
                </a>
                <a href="spirits.html" class="category-card">
                    <i class="fas fa-cocktail"></i>
                    <h3>Spirits</h3>
                    <p>Whiskey, Vodka, Rum & More</p>
                </a>
                <a href="beer.html" class="category-card">
                    <i class="fas fa-beer"></i>
                    <h3>Beer</h3>
                    <p>Craft & Imported Beers</p>
                </a>
                <a href="seltzer.html" class="category-card">
                    <i class="fas fa-glass-whiskey"></i>
                    <h3>Seltzer</h3>
                    <p>Hard Seltzers & Spritzers</p>
                </a>
                <a href="thc.html" class="category-card">
                    <i class="fas fa-leaf"></i>
                    <h3>THC</h3>
                    <p>THC Beverages & Products</p>
                </a>
                <a href="nonalcoholic.html" class="category-card">
                    <i class="fas fa-glass-martini-alt"></i>
                    <h3>Non Alcoholic</h3>
                    <p>N/A Wine, N/A Beer & More</p>
                </a>
            </div>
        </div>
    </section>

    <!-- Best Sellers Section -->
    <section id="bestsellers" class="products-section">
        <div class="container">
            <h2>Best Sellers</h2>
            <div class="products-grid" id="bestsellers-grid">
                <!-- Products will be loaded here via JavaScript -->
            </div>
        </div>
    </section>

    <!-- New Arrivals Section -->
    <section id="newarrivals" class="products-section">
        <div class="container">
            <h2>New Arrivals</h2>
            <div class="products-grid" id="newarrivals-grid">
                <!-- Products will be loaded here via JavaScript -->
            </div>
        </div>
    </section>

    <!-- All Products Section -->
    <section id="products" class="products-section">
        <div class="container">
            <h2>All Products</h2>
            <div class="filters">
                <select id="category-filter">
                    <option value="">All Categories</option>
                    <option value="wine">Wine</option>
                    <option value="spirits">Spirits</option>
                    <option value="beer">Beer</option>
                    <option value="seltzer">Seltzer</option>
                    <option value="thc">THC</option>
                </select>
                <select id="sort-filter">
                    <option value="name">Sort by Name</option>
                    <option value="price-low">Price: Low to High</option>
                    <option value="price-high">Price: High to Low</option>
                    <option value="popularity">Most Popular</option>
                </select>
            </div>
            <div class="products-grid" id="all-products-grid">
                <!-- Products will be loaded here via JavaScript -->
            </div>
        </div>
    </section>

    <!-- About Section -->
    <section id="about" class="about-section">
        <div class="container">
            <div class="about-content">
                <h2>About Jp's Liquor</h2>
                <p>For over 8 years, Jp's Liquor has been serving our community with the finest selection of spirits, wines, and craft beers. Our knowledgeable staff is here to help you find the perfect bottle for any occasion.</p>
                <div class="features">
                    <div class="feature">
                        <i class="fas fa-medal"></i>
                        <h3>Quality Assured</h3>
                        <p>Premium products guaranteed</p>
                    </div>
                    <div class="feature">
                        <i class="fas fa-user"></i>
                        <h3>Expert Advice</h3>
                        <p>Professional recommendations</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Contact Section -->
    <section id="contact" class="contact-section">
        <div class="container">
            <h2>Contact Us</h2>
            <div class="contact-content">
                <div class="contact-info">
                    <h3>Visit Our Store</h3>
                    <p><i class="fas fa-map-marker-alt"></i> 6501 Ware Rd, Lino Lakes, MN 55014 </p>
                    <p><i class="fas fa-phone"></i> (651) 483-1605 </p>
                    <p><i class="fas fa-envelope"></i> jpsliquor@gmail.com</p>
                    <h4>Store Hours</h4>
                    <p>Monday: 2:00 PM - 9:00 PM</p>
                    <p>Tuesday: 2:00 PM - 9:00 PM</p>
                    <p>Wednesday: 10:00 AM - 9:00 PM</p>
                    <p>Thursday: 10:00 AM - 9:00 PM</p>
                    <p>Friday: 10:00 AM - 9:00 PM</p>
                    <p>Saturday: 10:00 AM - 9:00 PM</p>
                    <p>Sunday: Closed</p>
                </div>
                <div class="contact-form">
                    <form id="contact-form">
                        <input type="text" placeholder="Your Name" required>
                        <input type="email" placeholder="Your Email" required>
                        <input type="tel" placeholder="Your Phone">
                        <textarea placeholder="Your Message" rows="5" required></textarea>
                        <button type="submit" class="submit-button">Send Message</button>
                    </form>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>Jp's Liquor</h3>
                    <p>Your trusted source for premium spirits and exceptional service.</p>
                </div>
                <div class="footer-section">
                    <h4>Quick Links</h4>
                    <ul>
                        <li><a href="#home">Home</a></li>
                        <li><a href="#products">Products</a></li>
                        <li><a href="#bestsellers">Best Sellers</a></li>
                        <li><a href="#newarrivals">New Arrivals</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Categories</h4>
                    <ul>
                        <li><a href="#products">Wine</a></li>
                        <li><a href="#products">Spirits</a></li>
                        <li><a href="#products">Beer</a></li>
                        <li><a href="#products">Seltzer</a></li>
                        <li><a href="#products">THC</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Connect With Us</h4>
                    <div class="social-links">
                        <a href="https://www.facebook.com/Jpsliquorliquorwineandbeer" target="_blank" rel="noopener"><i class="fab fa-facebook"></i></a>
                        <a href="https://www.instagram.com/jpsliquorwineandbeer/" target="_blank" rel="noopener"><i class="fab fa-instagram"></i></a>
                        
                    </div>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 Jp's Liquor. All rights reserved. Must be 21+ to purchase alcohol.</p>
            </div>
        </div>
    </footer>

    <!-- Authentication UI Components -->
    <div id="auth-modals-container">
        <!-- Login Modal -->
        <div id="login-modal" class="auth-modal">
            <div class="auth-container">
                <div class="auth-header">
                    <h2>Welcome Back</h2>
                    <p>Sign in to your Jp's Liquor account</p>
                    <button class="close-btn" onclick="closeAuthModal('login')">&times;</button>
                </div>
                
                <form id="login-form" class="auth-form">
                    <div class="form-group">
                        <label for="login-email">Email Address</label>
                        <input type="email" id="login-email" name="email" required 
                               placeholder="Enter your email" autocomplete="email">
                        <div class="error-message" id="login-email-error"></div>
                    </div>
                    
                    <div class="form-group">
                        <label for="login-password">Password</label>
                        <div class="password-input">
                            <input type="password" id="login-password" name="password" required 
                                   placeholder="Enter your password" autocomplete="current-password">
                            <button type="button" class="password-toggle" onclick="togglePassword('login-password')">
                                <i class="fas fa-eye"></i>
                            </button>
                        </div>
                        <div class="error-message" id="login-password-error"></div>
                    </div>
                    
                    <div class="form-options">
                        <label class="checkbox-label">
                            <input type="checkbox" id="remember-me" name="rememberMe">
                            <span class="checkmark"></span>
                            Remember me
                        </label>
                        <a href="#" onclick="showAuthModal('forgot-password')" class="forgot-link">
                            Forgot Password?
                        </a>
                    </div>
                    
                    <button type="submit" class="auth-button">
                        <span class="button-text">Sign In</span>
                        <span class="loading-spinner" style="display: none;">
                            <i class="fas fa-spinner fa-spin"></i>
                        </span>
                    </button>
                </form>
                
                <div class="social-auth">
                    <div class="divider">
                        <span>or continue with</span>
                    </div>
                    
                    <div class="social-buttons">
                        <button type="button" class="social-btn google-btn" onclick="signInWithGoogleLocal()">
                            <i class="fab fa-google"></i>
                            <span>Google</span>
                        </button>
                        
                        <button type="button" class="social-btn apple-btn" onclick="signInWithApple()">
                            <i class="fab fa-apple"></i>
                            <span>Apple</span>
                        </button>
                        
                        <button type="button" class="social-btn phone-btn" onclick="showAuthModal('phone-login')">
                            <i class="fas fa-phone"></i>
                            <span>Phone</span>
                        </button>
                    </div>
                </div>
                
                <div class="auth-footer">
                    <p>Don't have an account? 
                        <a href="#" onclick="showAuthModal('register')">Sign up here</a>
                    </p>
                </div>
            </div>
        </div>

        <!-- Registration Modal -->
        <div id="register-modal" class="auth-modal">
            <div class="auth-container">
                <div class="auth-header">
                    <h2>Create Account</h2>
                    <p>Join Jp's Liquor for exclusive offers and updates</p>
                    <button class="close-btn" onclick="closeAuthModal('register')">&times;</button>
                </div>
                
                <form id="register-form" class="auth-form">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="register-firstname">First Name</label>
                            <input type="text" id="register-firstname" name="firstName" required 
                                   placeholder="First name" autocomplete="given-name">
                            <div class="error-message" id="register-firstname-error"></div>
                        </div>
                        
                        <div class="form-group">
                            <label for="register-lastname">Last Name</label>
                            <input type="text" id="register-lastname" name="lastName" required 
                                   placeholder="Last name" autocomplete="family-name">
                            <div class="error-message" id="register-lastname-error"></div>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="register-username">Username</label>
                        <input type="text" id="register-username" name="username" required 
                               placeholder="Choose a username" autocomplete="username">
                        <div class="error-message" id="register-username-error"></div>
                    </div>
                    
                    <div class="form-group">
                        <label for="register-email">Email Address</label>
                        <input type="email" id="register-email" name="email" required 
                               placeholder="Enter your email" autocomplete="email">
                        <div class="error-message" id="register-email-error"></div>
                    </div>
                    
                    <div class="form-group">
                        <label for="register-phone">Phone Number (Optional)</label>
                        <input type="tel" id="register-phone" name="phone" 
                               placeholder="Enter your phone number" autocomplete="tel">
                        <div class="error-message" id="register-phone-error"></div>
                    </div>
                    
                    <div class="form-group">
                        <label for="register-dob">Date of Birth</label>
                        <input type="date" id="register-dob" name="dateOfBirth" required 
                               max="2003-12-31" autocomplete="bday">
                        <div class="error-message" id="register-dob-error"></div>
                        <small class="form-help">You must be 21 or older to create an account</small>
                    </div>
                    
                    <div class="form-group">
                        <label for="register-password">Password</label>
                        <div class="password-input">
                            <input type="password" id="register-password" name="password" required 
                                   placeholder="Create a strong password" autocomplete="new-password">
                            <button type="button" class="password-toggle" onclick="togglePassword('register-password')">
                                <i class="fas fa-eye"></i>
                            </button>
                        </div>
                        <div class="password-strength" id="password-strength">
                            <div class="strength-bar">
                                <div class="strength-fill" id="strength-fill"></div>
                            </div>
                            <div class="strength-text" id="strength-text">Password strength</div>
                        </div>
                        <div class="password-requirements" id="password-requirements">
                            <div class="requirement" data-requirement="length">
                                <i class="fas fa-circle"></i> At least 8 characters
                            </div>
                            <div class="requirement" data-requirement="uppercase">
                                <i class="fas fa-circle"></i> One uppercase letter
                            </div>
                            <div class="requirement" data-requirement="lowercase">
                                <i class="fas fa-circle"></i> One lowercase letter
                            </div>
                            <div class="requirement" data-requirement="number">
                                <i class="fas fa-circle"></i> One number
                            </div>
                            <div class="requirement" data-requirement="special">
                                <i class="fas fa-circle"></i> One special character
                            </div>
                        </div>
                        <div class="error-message" id="register-password-error"></div>
                    </div>
                    
                    <div class="form-group">
                        <label for="register-confirm-password">Confirm Password</label>
                        <div class="password-input">
                            <input type="password" id="register-confirm-password" name="confirmPassword" required 
                                   placeholder="Confirm your password" autocomplete="new-password">
                            <button type="button" class="password-toggle" onclick="togglePassword('register-confirm-password')">
                                <i class="fas fa-eye"></i>
                            </button>
                        </div>
                        <div class="error-message" id="register-confirm-password-error"></div>
                    </div>
                    
                    <div class="form-options">
                        <label class="checkbox-label">
                            <input type="checkbox" id="terms-accept" name="termsAccept" required>
                            <span class="checkmark"></span>
                            I agree to the <a href="#" onclick="showTerms()">Terms of Service</a> and 
                            <a href="#" onclick="showPrivacy()">Privacy Policy</a>
                        </label>
                        
                        <label class="checkbox-label">
                            <input type="checkbox" id="marketing-consent" name="marketingConsent">
                            <span class="checkmark"></span>
                            I would like to receive marketing emails about special offers and events
                        </label>
                    </div>
                    
                    <button type="submit" class="auth-button">
                        <span class="button-text">Create Account</span>
                        <span class="loading-spinner" style="display: none;">
                            <i class="fas fa-spinner fa-spin"></i>
                        </span>
                    </button>
                </form>
                
                <div class="social-auth">
                    <div class="divider">
                        <span>or continue with</span>
                    </div>
                    
                    <div class="social-buttons">
                        <button type="button" class="social-btn google-btn" onclick="signInWithGoogleLocal()">
                            <i class="fab fa-google"></i>
                            <span>Google</span>
                        </button>
                        
                        <button type="button" class="social-btn apple-btn" onclick="signUpWithApple()">
                            <i class="fab fa-apple"></i>
                            <span>Apple</span>
                        </button>
                        
                        <button type="button" class="social-btn phone-btn" onclick="showAuthModal('phone-register')">
                            <i class="fas fa-phone"></i>
                            <span>Phone</span>
                        </button>
                    </div>
                </div>
                
                <div class="auth-footer">
                    <p>Already have an account? 
                        <a href="#" onclick="showAuthModal('login')">Sign in here</a>
                    </p>
                </div>
            </div>
        </div>

        <!-- Forgot Password Modal -->
        <div id="forgot-password-modal" class="auth-modal">
            <div class="auth-container">
                <div class="auth-header">
                    <h2>Reset Password</h2>
                    <p>Enter your email to receive a password reset link</p>
                    <button class="close-btn" onclick="closeAuthModal('forgot-password')">&times;</button>
                </div>
                
                <form id="forgot-password-form" class="auth-form">
                    <div class="form-group">
                        <label for="reset-email">Email Address</label>
                        <input type="email" id="reset-email" name="email" required 
                               placeholder="Enter your email" autocomplete="email">
                        <div class="error-message" id="reset-email-error"></div>
                    </div>
                    
                    <button type="submit" class="auth-button">
                        <span class="button-text">Send Reset Link</span>
                        <span class="loading-spinner" style="display: none;">
                            <i class="fas fa-spinner fa-spin"></i>
                        </span>
                    </button>
                </form>
                
                <div class="auth-footer">
                    <p>Remember your password? 
                        <a href="#" onclick="showAuthModal('login')">Sign in here</a>
                    </p>
                </div>
            </div>
        </div>

        <!-- User Profile Modal -->
        <div id="profile-modal" class="auth-modal">
            <div class="auth-container">
                <div class="auth-header">
                    <h2>My Profile</h2>
                    <p>Manage your account settings and preferences</p>
                    <button class="close-btn" onclick="closeAuthModal('profile')">&times;</button>
                </div>
                
                <div class="profile-content">
                    <div class="profile-section">
                        <h3>Account Information</h3>
                        <form id="profile-form" class="auth-form">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="profile-firstname">First Name</label>
                                    <input type="text" id="profile-firstname" name="firstName" required>
                                    <div class="error-message" id="profile-firstname-error"></div>
                                </div>
                                
                                <div class="form-group">
                                    <label for="profile-lastname">Last Name</label>
                                    <input type="text" id="profile-lastname" name="lastName" required>
                                    <div class="error-message" id="profile-lastname-error"></div>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label for="profile-email">Email Address</label>
                                <input type="email" id="profile-email" name="email" required readonly>
                                <small class="form-help">Email cannot be changed</small>
                            </div>
                            
                            <div class="form-group">
                                <label for="profile-phone">Phone Number</label>
                                <input type="tel" id="profile-phone" name="phone">
                                <div class="error-message" id="profile-phone-error"></div>
                            </div>
                            
                            <button type="submit" class="auth-button">
                                <span class="button-text">Update Profile</span>
                                <span class="loading-spinner" style="display: none;">
                                    <i class="fas fa-spinner fa-spin"></i>
                                </span>
                            </button>
                        </form>
                    </div>
                    
                    <div class="profile-section">
                        <h3>Change Password</h3>
                        <form id="change-password-form" class="auth-form">
                            <div class="form-group">
                                <label for="current-password">Current Password</label>
                                <div class="password-input">
                                    <input type="password" id="current-password" name="currentPassword" required>
                                    <button type="button" class="password-toggle" onclick="togglePassword('current-password')">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                </div>
                                <div class="error-message" id="current-password-error"></div>
                            </div>
                            
                            <div class="form-group">
                                <label for="new-password">New Password</label>
                                <div class="password-input">
                                    <input type="password" id="new-password" name="newPassword" required>
                                    <button type="button" class="password-toggle" onclick="togglePassword('new-password')">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                </div>
                                <div class="error-message" id="new-password-error"></div>
                            </div>
                            
                            <div class="form-group">
                                <label for="confirm-new-password">Confirm New Password</label>
                                <div class="password-input">
                                    <input type="password" id="confirm-new-password" name="confirmNewPassword" required>
                                    <button type="button" class="password-toggle" onclick="togglePassword('confirm-new-password')">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                </div>
                                <div class="error-message" id="confirm-new-password-error"></div>
                            </div>
                            
                            <button type="submit" class="auth-button">
                                <span class="button-text">Change Password</span>
                                <span class="loading-spinner" style="display: none;">
                                    <i class="fas fa-spinner fa-spin"></i>
                                </span>
                            </button>
                        </form>
                    </div>
                    
                    <div class="profile-section">
                        <h3>Preferences</h3>
                        <form id="preferences-form" class="auth-form">
                            <div class="form-options">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="email-notifications" name="emailNotifications">
                                    <span class="checkmark"></span>
                                    Receive email notifications about orders and updates
                                </label>
                                
                                <label class="checkbox-label">
                                    <input type="checkbox" id="sms-notifications" name="smsNotifications">
                                    <span class="checkmark"></span>
                                    Receive SMS notifications (if phone number provided)
                                </label>
                                
                                <label class="checkbox-label">
                                    <input type="checkbox" id="marketing-emails" name="marketingEmails">
                                    <span class="checkmark"></span>
                                    Receive marketing emails about special offers and events
                                </label>
                            </div>
                            
                            <button type="submit" class="auth-button">
                                <span class="button-text">Save Preferences</span>
                                <span class="loading-spinner" style="display: none;">
                                    <i class="fas fa-spinner fa-spin"></i>
                                </span>
                            </button>
                        </form>
                    </div>
                    
                    <div class="profile-section danger-zone">
                        <h3>Danger Zone</h3>
                        <p>These actions cannot be undone.</p>
                        
                        <button type="button" class="danger-button" onclick="showDeleteAccountModal()">
                            <i class="fas fa-trash"></i>
                            Delete Account
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Delete Account Confirmation Modal -->
        <div id="delete-account-modal" class="auth-modal">
            <div class="auth-container">
                <div class="auth-header">
                    <h2>Delete Account</h2>
                    <p>This action cannot be undone</p>
                    <button class="close-btn" onclick="closeAuthModal('delete-account')">&times;</button>
                </div>
                
                <div class="delete-warning">
                    <i class="fas fa-exclamation-triangle"></i>
                    <h3>Warning</h3>
                    <p>Deleting your account will:</p>
                    <ul>
                        <li>Permanently remove all your data</li>
                        <li>Cancel any pending orders</li>
                        <li>Remove your account from our system</li>
                    </ul>
                </div>
                
                <form id="delete-account-form" class="auth-form">
                    <div class="form-group">
                        <label for="delete-password">Enter your password to confirm</label>
                        <div class="password-input">
                            <input type="password" id="delete-password" name="password" required 
                                   placeholder="Enter your password">
                            <button type="button" class="password-toggle" onclick="togglePassword('delete-password')">
                                <i class="fas fa-eye"></i>
                            </button>
                        </div>
                        <div class="error-message" id="delete-password-error"></div>
                    </div>
                    
                    <div class="form-options">
                        <label class="checkbox-label">
                            <input type="checkbox" id="delete-confirm" name="deleteConfirm" required>
                            <span class="checkmark"></span>
                            I understand that this action cannot be undone
                        </label>
                    </div>
                    
                    <div class="button-group">
                        <button type="button" class="secondary-button" onclick="closeAuthModal('delete-account')">
                            Cancel
                        </button>
                        <button type="submit" class="danger-button">
                            <span class="button-text">Delete Account</span>
                            <span class="loading-spinner" style="display: none;">
                                <i class="fas fa-spinner fa-spin"></i>
                            </span>
                        </button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Email Verification Modal -->
        <div id="verification-modal" class="auth-modal">
            <div class="auth-container">
                <div class="auth-header">
                    <h2>Verify Your Email</h2>
                    <p>We've sent a verification link to your email</p>
                    <button class="close-btn" onclick="closeAuthModal('verification')">&times;</button>
                </div>
                
                <div class="verification-content">
                    <div class="verification-icon">
                        <i class="fas fa-envelope"></i>
                    </div>
                    
                    <p>Please check your email and click the verification link to activate your account.</p>
                    
                    <div class="verification-actions">
                        <button type="button" class="secondary-button" onclick="resendVerification()">
                            Resend Verification Email
                        </button>
                        
                        <button type="button" class="auth-button" onclick="closeAuthModal('verification')">
                            Continue to Login
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Phone Login Modal -->
        <div id="phone-login-modal" class="auth-modal">
            <div class="auth-container">
                <div class="auth-header">
                    <h2>Sign In with Phone</h2>
                    <p>Enter your phone number to receive a verification code</p>
                    <button class="close-btn" onclick="closeAuthModal('phone-login')">&times;</button>
                </div>
                
                <form id="phone-login-form" class="auth-form">
                    <div class="form-group">
                        <label for="phone-login-number">Phone Number</label>
                        <input type="tel" id="phone-login-number" name="phoneNumber" required 
                               placeholder="(555) 123-4567" autocomplete="tel">
                        <div class="error-message" id="phone-login-number-error"></div>
                    </div>
                    
                    <div class="form-group" id="verification-code-group" style="display: none;">
                        <label for="verification-code">Verification Code</label>
                        <input type="text" id="verification-code" name="verificationCode" 
                               placeholder="Enter 6-digit code" maxlength="6">
                        <div class="error-message" id="verification-code-error"></div>
                        <small class="form-help">Enter the 6-digit code sent to your phone</small>
                    </div>
                    
                    <button type="submit" class="auth-button" id="phone-login-submit">
                        <span class="button-text">Send Code</span>
                        <span class="loading-spinner" style="display: none;">
                            <i class="fas fa-spinner fa-spin"></i>
                        </span>
                    </button>
                </form>
                
                <!-- reCAPTCHA container for phone auth -->
                <div id="recaptcha-container"></div>
                
                <div class="auth-footer">
                    <p>Don't have an account? 
                        <a href="#" onclick="showAuthModal('phone-register')">Sign up with phone</a>
                    </p>
                </div>
            </div>
        </div>

        <!-- Phone Registration Modal -->
        <div id="phone-register-modal" class="auth-modal">
            <div class="auth-container">
                <div class="auth-header">
                    <h2>Sign Up with Phone</h2>
                    <p>Create an account using your phone number</p>
                    <button class="close-btn" onclick="closeAuthModal('phone-register')">&times;</button>
                </div>
                
                <form id="phone-register-form" class="auth-form">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="phone-register-firstname">First Name</label>
                            <input type="text" id="phone-register-firstname" name="firstName" required 
                                   placeholder="First name" autocomplete="given-name">
                            <div class="error-message" id="phone-register-firstname-error"></div>
                        </div>
                        
                        <div class="form-group">
                            <label for="phone-register-lastname">Last Name</label>
                            <input type="text" id="phone-register-lastname" name="lastName" required 
                                   placeholder="Last name" autocomplete="family-name">
                            <div class="error-message" id="phone-register-lastname-error"></div>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="phone-register-number">Phone Number</label>
                        <input type="tel" id="phone-register-number" name="phoneNumber" required 
                               placeholder="(555) 123-4567" autocomplete="tel">
                        <div class="error-message" id="phone-register-number-error"></div>
                    </div>
                    
                    <div class="form-group">
                        <label for="phone-register-dob">Date of Birth</label>
                        <input type="date" id="phone-register-dob" name="dateOfBirth" required 
                               max="2003-12-31" autocomplete="bday">
                        <div class="error-message" id="phone-register-dob-error"></div>
                        <small class="form-help">You must be 21 or older to create an account</small>
                    </div>
                    
                    <div class="form-group" id="phone-verification-code-group" style="display: none;">
                        <label for="phone-verification-code">Verification Code</label>
                        <input type="text" id="phone-verification-code" name="verificationCode" 
                               placeholder="Enter 6-digit code" maxlength="6">
                        <div class="error-message" id="phone-verification-code-error"></div>
                        <small class="form-help">Enter the 6-digit code sent to your phone</small>
                    </div>
                    
                    <div class="form-options">
                        <label class="checkbox-label">
                            <input type="checkbox" id="phone-terms-accept" name="termsAccept" required>
                            <span class="checkmark"></span>
                            I agree to the <a href="#" onclick="showTerms()">Terms of Service</a> and 
                            <a href="#" onclick="showPrivacy()">Privacy Policy</a>
                        </label>
                        
                        <label class="checkbox-label">
                            <input type="checkbox" id="phone-marketing-consent" name="marketingConsent">
                            <span class="checkmark"></span>
                            I would like to receive SMS notifications about special offers and events
                        </label>
                    </div>
                    
                    <button type="submit" class="auth-button" id="phone-register-submit">
                        <span class="button-text">Send Code</span>
                        <span class="loading-spinner" style="display: none;">
                            <i class="fas fa-spinner fa-spin"></i>
                        </span>
                    </button>
                </form>
                
                <div class="auth-footer">
                    <p>Already have an account? 
                        <a href="#" onclick="showAuthModal('phone-login')">Sign in with phone</a>
                    </p>
                </div>
            </div>
        </div>

        <!-- Security Notice Modal -->
        <div id="security-notice-modal" class="auth-modal">
            <div class="auth-container">
                <div class="auth-header">
                    <h2>Security Notice</h2>
                    <p>Important security information</p>
                    <button class="close-btn" onclick="closeAuthModal('security-notice')">&times;</button>
                </div>
                
                <div class="security-content">
                    <div class="security-icon">
                        <i class="fas fa-shield-alt"></i>
                    </div>
                    
                    <h3>Your Account Security</h3>
                    
                    <div class="security-tips">
                        <div class="security-tip">
                            <i class="fas fa-lock"></i>
                            <div>
                                <h4>Strong Passwords</h4>
                                <p>Use a unique, strong password for your account</p>
                            </div>
                        </div>
                        
                        <div class="security-tip">
                            <i class="fas fa-envelope"></i>
                            <div>
                                <h4>Email Verification</h4>
                                <p>Verify your email address to secure your account</p>
                            </div>
                        </div>
                        
                        <div class="security-tip">
                            <i class="fas fa-sign-out-alt"></i>
                            <div>
                                <h4>Logout</h4>
                                <p>Always logout when using shared computers</p>
                            </div>
                        </div>
                        
                        <div class="security-tip">
                            <i class="fas fa-eye"></i>
                            <div>
                                <h4>Monitor Activity</h4>
                                <p>Regularly check your account for suspicious activity</p>
                            </div>
                        </div>
                    </div>
                    
                    <button type="button" class="auth-button" onclick="closeAuthModal('security-notice')">
                        I Understand
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script src="firebase-config.js" defer></script>
    <script src="config.js" defer></script>
    <script src="auth.js" defer></script>
    <script src="auth-ui.js" defer></script>
    <script src="script.js" defer></script>
    <!-- Deployment test: minor change for Vercel push -->
</body>
</html> 