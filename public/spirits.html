<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spirits - Jp's Liquor</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="auth-styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-auth-compat.js"></script>
    
    <!-- Essential Auth Functions - Available Immediately -->
    <script>
        // Global functions for HTML onclick handlers - defined immediately to prevent "not defined" errors
        function showAuthModal(modalType) {
            console.log('showAuthModal called with:', modalType);
            console.log('window.authUI:', window.authUI);
            
            if (window.authUI && typeof window.authUI.showModal === 'function') {
                console.log('Calling authUI.showModal...');
                try {
                    window.authUI.showModal(modalType);
                } catch (error) {
                    console.error('Error calling authUI.showModal:', error);
                    // Fallback to direct modal manipulation
                    fallbackShowModal(modalType);
                }
            } else {
                console.error('window.authUI is not available or showModal method missing!');
                // Fallback to direct modal manipulation
                fallbackShowModal(modalType);
            }
        }
        
        function fallbackShowModal(modalType) {
            console.log('Using fallback modal display for:', modalType);
            const modal = document.getElementById(modalType + '-modal');
            if (modal) {
                // Hide any other active modals first
                document.querySelectorAll('.auth-modal.active').forEach(m => {
                    m.classList.remove('active');
                });
                modal.classList.add('active');
                console.log('Modal shown via fallback:', modalType);
            } else {
                console.error('Modal not found for fallback:', modalType);
            }
        }

        function closeAuthModal(modalType) {
            console.log('closeAuthModal called with:', modalType);
            
            if (window.authUI && typeof window.authUI.closeCurrentModal === 'function') {
                try {
                    window.authUI.closeCurrentModal();
                } catch (error) {
                    console.error('Error calling authUI.closeCurrentModal:', error);
                    // Fallback to direct modal manipulation
                    fallbackCloseModal(modalType);
                }
            } else {
                console.error('window.authUI is not available or closeCurrentModal method missing!');
                // Fallback to direct modal manipulation
                fallbackCloseModal(modalType);
            }
        }
        
        function fallbackCloseModal(modalType) {
            console.log('Using fallback modal close for:', modalType);
            const modal = document.getElementById(modalType + '-modal');
            if (modal) {
                modal.classList.remove('active');
                console.log('Modal closed via fallback:', modalType);
            } else {
                console.error('Modal not found for fallback close:', modalType);
                // Close all modals as a last resort
                document.querySelectorAll('.auth-modal.active').forEach(m => {
                    m.classList.remove('active');
                });
                console.log('Closed all active modals as fallback');
            }
        }

        function togglePassword(inputId) {
            const input = document.getElementById(inputId);
            const button = input.parentNode.querySelector('.password-toggle');
            const icon = button.querySelector('i');
            
            if (input.type === 'password') {
                input.type = 'text';
                icon.className = 'fas fa-eye-slash';
            } else {
                input.type = 'password';
                icon.className = 'fas fa-eye';
            }
        }

        function resendVerification() {
            // Simulate resending verification email
            if (window.authUI) {
                window.authUI.showSuccess('Verification email resent!');
            }
        }

        function showTerms() {
            alert('Terms of Service would be displayed here.');
        }

        function showPrivacy() {
            alert('Privacy Policy would be displayed here.');
        }

        function showDeleteAccountModal() {
            showAuthModal('delete-account');
        }

        function showUserMenu() {
            const dropdown = document.getElementById('user-dropdown');
            if (dropdown) {
                dropdown.classList.toggle('show');
            }
        }
    </script>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <nav class="navbar">
            <div class="nav-container">
                <div class="nav-auth">
                    <button class="auth-btn signin-btn" onclick="showAuthModal('login')">Sign In</button>
                    <button class="auth-btn signup-btn" onclick="showAuthModal('register')">Sign Up</button>
                </div>
                <div class="nav-logo">
                    <h1><a href="index.html" style="text-decoration: none; color: inherit;">Jp's Liquor</a></h1>
                </div>
                <div class="nav-menu">
                    <a href="index.html" class="nav-link">Home</a>
                    <a href="index.html#products" class="nav-link">Products</a>
                    <a href="index.html#bestsellers" class="nav-link">Best Sellers</a>
                    <a href="index.html#newarrivals" class="nav-link">New Arrivals</a>
                    <a href="index.html#about" class="nav-link">About</a>
                    <a href="index.html#contact" class="nav-link">Contact</a>
                </div>
                <div class="nav-toggle">
                    <span class="bar"></span>
                    <span class="bar"></span>
                    <span class="bar"></span>
                </div>
            </div>
        </nav>
    </header>

    <!-- Category Hero Section -->
    <section class="hero" style="background: linear-gradient(135deg, #8b2635 0%, #a83244 100%);">
        <div class="hero-content">
            <h1>Spirits Collection</h1>
            <p>Discover our premium selection of whiskey, vodka, rum, and more</p>
            <div class="category-breadcrumb">
                <a href="index.html">Home</a> > <span>Spirits</span>
            </div>
        </div>
    </section>

    <!-- Spirits Categories -->
    <section class="categories">
        <div class="container">
            <h2>Spirits Categories</h2>
            <div class="category-grid">
                <div class="category-card">
                    <i class="fas fa-glass-whiskey" style="color: #8b2635;"></i>
                    <h3>Whiskey</h3>
                    <p>Bourbon, Scotch & Rye</p>
                </div>
                <div class="category-card">
                    <i class="fas fa-cocktail" style="color: #f4f4f4;"></i>
                    <h3>Vodka</h3>
                    <p>Premium & Flavored</p>
                </div>
                <div class="category-card">
                    <i class="fas fa-glass-whiskey" style="color: #ffb6c1;"></i>
                    <h3>Rum</h3>
                    <p>Light & Dark Varieties</p>
                </div>
                <div class="category-card">
                    <i class="fas fa-wine-bottle" style="color: #ffd700;"></i>
                    <h3>Other Spirits</h3>
                    <p>Gin, Tequila & More</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Spirits Products Section -->
    <section class="products-section">
        <div class="container">
            <h2>Spirits Products</h2>
            <div class="filters">
                <select id="spirits-type-filter">
                    <option value="">All Spirits Types</option>
                    <option value="whiskey">Whiskey</option>
                    <option value="vodka">Vodka</option>
                    <option value="rum">Rum</option>
                    <option value="gin">Gin</option>
                    <option value="tequila">Tequila</option>
                    <option value="other">Other Spirits</option>
                </select>
                <select id="sort-filter">
                    <option value="name">Sort by Name</option>
                    <option value="price-low">Price: Low to High</option>
                    <option value="price-high">Price: High to Low</option>
                    <option value="popularity">Most Popular</option>
                </select>
            </div>
            <div class="products-grid" id="spirits-products-grid">
                <!-- Spirits products will be loaded here via JavaScript -->
                <div class="product-card">
                    <div class="product-image">
                        <img src="https://via.placeholder.com/300x400/8b2635/ffffff?text=Spirits+Placeholder" alt="Spirits Product">
                        <div class="product-badge new">New</div>
                    </div>
                    <div class="product-info">
                        <h3 class="product-name">Sample Spirits Product</h3>
                        <p class="product-price">$34.99</p>
                        <button class="add-to-cart">Add to Cart</button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Back to Categories -->
    <section class="categories">
        <div class="container">
            <h2>Shop Other Categories</h2>
            <div class="category-grid">
                <a href="wine.html" class="category-card">
                    <i class="fas fa-wine-bottle"></i>
                    <h3>Wine</h3>
                    <p>Red, White, Ros√© & Sparkling</p>
                </a>
                <a href="beer.html" class="category-card">
                    <i class="fas fa-beer"></i>
                    <h3>Beer</h3>
                    <p>Craft & Imported Beers</p>
                </a>
                <a href="seltzer.html" class="category-card">
                    <i class="fas fa-glass-whiskey"></i>
                    <h3>Seltzer</h3>
                    <p>Hard Seltzers & Spritzers</p>
                </a>
                <a href="thc.html" class="category-card">
                    <i class="fas fa-leaf"></i>
                    <h3>THC</h3>
                    <p>THC Beverages & Products</p>
                </a>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>Jp's Liquor</h3>
                    <p>Your trusted source for premium spirits and exceptional service.</p>
                </div>
                <div class="footer-section">
                    <h4>Quick Links</h4>
                    <ul>
                        <li><a href="index.html">Home</a></li>
                        <li><a href="index.html#products">Products</a></li>
                        <li><a href="index.html#bestsellers">Best Sellers</a></li>
                        <li><a href="index.html#about">About</a></li>
                        <li><a href="index.html#contact">Contact</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Product Categories</h4>
                    <ul>
                        <li><a href="wine.html">Wine</a></li>
                        <li><a href="spirits.html">Spirits</a></li>
                        <li><a href="beer.html">Beer</a></li>
                        <li><a href="seltzer.html">Seltzer</a></li>
                        <li><a href="thc.html">THC</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Connect With Us</h4>
                    <div class="social-links">
                        <a href="https://www.facebook.com/Jpsliquorliquorwineandbeer" target="_blank" rel="noopener"><i class="fab fa-facebook"></i></a>
                        <a href="https://www.instagram.com/jpsliquorwineandbeer/" target="_blank" rel="noopener"><i class="fab fa-instagram"></i></a>
                    </div>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 Jp's Liquor. All rights reserved. Must be 21+ to purchase alcohol.</p>
            </div>
        </div>
    </footer>

    <!-- Authentication Modals (same as index.html) -->
    <div id="auth-modals-container">
        <!-- Login Modal -->
        <div id="login-modal" class="auth-modal">
            <div class="auth-container">
                <div class="auth-header">
                    <h2>Welcome Back</h2>
                    <p>Sign in to your Jp's Liquor account</p>
                    <button class="close-btn" onclick="closeAuthModal('login')">&times;</button>
                </div>
                
                <form id="login-form" class="auth-form">
                    <div class="form-group">
                        <label for="login-email">Email Address</label>
                        <input type="email" id="login-email" name="email" required 
                               placeholder="Enter your email" autocomplete="email">
                        <div class="error-message" id="login-email-error"></div>
                    </div>
                    
                    <div class="form-group">
                        <label for="login-password">Password</label>
                        <div class="password-input">
                            <input type="password" id="login-password" name="password" required 
                                   placeholder="Enter your password" autocomplete="current-password">
                            <button type="button" class="password-toggle" onclick="togglePassword('login-password')">
                                <i class="fas fa-eye"></i>
                            </button>
                        </div>
                        <div class="error-message" id="login-password-error"></div>
                    </div>
                    
                    <div class="form-options">
                        <label class="checkbox-label">
                            <input type="checkbox" id="remember-me" name="rememberMe">
                            <span class="checkmark"></span>
                            Remember me
                        </label>
                        <a href="#" onclick="showAuthModal('forgot-password')" class="forgot-link">
                            Forgot Password?
                        </a>
                    </div>
                    
                    <button type="submit" class="auth-button">
                        <span class="button-text">Sign In</span>
                        <span class="loading-spinner" style="display: none;">
                            <i class="fas fa-spinner fa-spin"></i>
                        </span>
                    </button>
                </form>
                
                <div class="social-auth">
                    <div class="divider">
                        <span>or continue with</span>
                    </div>
                    
                    <div class="social-buttons">
                        <button type="button" class="social-btn google-btn" onclick="signInWithGoogleLocal()">
                            <i class="fab fa-google"></i>
                            <span>Google</span>
                        </button>
                        
                        <button type="button" class="social-btn apple-btn" onclick="signInWithApple()">
                            <i class="fab fa-apple"></i>
                            <span>Apple</span>
                        </button>
                        
                        <button type="button" class="social-btn phone-btn" onclick="showAuthModal('phone-login')">
                            <i class="fas fa-phone"></i>
                            <span>Phone</span>
                        </button>
                    </div>
                </div>
                
                <div class="auth-footer">
                    <p>Don't have an account? 
                        <a href="#" onclick="showAuthModal('register')">Sign up here</a>
                    </p>
                </div>
            </div>
        </div>

        <!-- Registration Modal -->
        <div id="register-modal" class="auth-modal">
            <div class="auth-container">
                <div class="auth-header">
                    <h2>Create Account</h2>
                    <p>Join Jp's Liquor for exclusive offers and updates</p>
                    <button class="close-btn" onclick="closeAuthModal('register')">&times;</button>
                </div>
                
                <form id="register-form" class="auth-form">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="register-firstname">First Name</label>
                            <input type="text" id="register-firstname" name="firstName" required 
                                   placeholder="First name" autocomplete="given-name">
                            <div class="error-message" id="register-firstname-error"></div>
                        </div>
                        
                        <div class="form-group">
                            <label for="register-lastname">Last Name</label>
                            <input type="text" id="register-lastname" name="lastName" required 
                                   placeholder="Last name" autocomplete="family-name">
                            <div class="error-message" id="register-lastname-error"></div>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="register-email">Email Address</label>
                        <input type="email" id="register-email" name="email" required 
                               placeholder="Enter your email" autocomplete="email">
                        <div class="error-message" id="register-email-error"></div>
                    </div>
                    
                    <div class="form-group">
                        <label for="register-password">Password</label>
                        <div class="password-input">
                            <input type="password" id="register-password" name="password" required 
                                   placeholder="Create a strong password" autocomplete="new-password">
                            <button type="button" class="password-toggle" onclick="togglePassword('register-password')">
                                <i class="fas fa-eye"></i>
                            </button>
                        </div>
                        <div class="error-message" id="register-password-error"></div>
                    </div>
                    
                    <div class="form-options">
                        <label class="checkbox-label">
                            <input type="checkbox" id="terms-accept" name="termsAccept" required>
                            <span class="checkmark"></span>
                            I agree to the <a href="#" onclick="showTerms()">Terms of Service</a> and 
                            <a href="#" onclick="showPrivacy()">Privacy Policy</a>
                        </label>
                    </div>
                    
                    <button type="submit" class="auth-button">
                        <span class="button-text">Create Account</span>
                        <span class="loading-spinner" style="display: none;">
                            <i class="fas fa-spinner fa-spin"></i>
                        </span>
                    </button>
                </form>
                
                <div class="social-auth">
                    <div class="divider">
                        <span>or continue with</span>
                    </div>
                    
                    <div class="social-buttons">
                        <button type="button" class="social-btn google-btn" onclick="signUpWithGoogleLocal()">
                            <i class="fab fa-google"></i>
                            <span>Google</span>
                        </button>
                        
                        <button type="button" class="social-btn apple-btn" onclick="signUpWithApple()">
                            <i class="fab fa-apple"></i>
                            <span>Apple</span>
                        </button>
                        
                        <button type="button" class="social-btn phone-btn" onclick="showAuthModal('phone-register')">
                            <i class="fas fa-phone"></i>
                            <span>Phone</span>
                        </button>
                    </div>
                </div>
                
                <div class="auth-footer">
                    <p>Already have an account? 
                        <a href="#" onclick="showAuthModal('login')">Sign in here</a>
                    </p>
                </div>
            </div>
        </div>
    </div>

    <script src="firebase-config.js"></script>
    <script src="config.js"></script>
    <script src="auth.js"></script>
    <script src="auth-ui.js"></script>
    <script src="script.js"></script>
</body>
</html> 